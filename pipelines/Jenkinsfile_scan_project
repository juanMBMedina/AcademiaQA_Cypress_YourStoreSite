pipeline {
    agent any

    environment {
        PROJECT_NAME = 'YourStore-Cypress-TestLab'
        REPO_URL = 'git@github.com:juanMBMedina/YourStore-Cypress-TestLab.git'
        DEFAULT_BRANCH = 'main'
    }

    stages {
        stage('Clone or Update Repository') {
           load '../scan_code/Jenkinsfile_scan_repository'
           scanProject(PROJECT_NAME, REPO_URL, DEFAULT_BRANCH){
        }    
    }

        post {
            success {
                echo "Scan completed successfully!"
            }
            failure {
                echo "Scan failed!"
            }
        }
    }
}